{% extends 'home/base.html' %}
{% load widget_tweaks %}

{% block title %}เปลี่ยนรหัสผ่าน{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto mt-10 px-4">
    
    <div class="mb-8 border-b pb-4">
        <h2 class="text-3xl font-black text-[#112D4E]">CHANGE <span class="text-[#3F72AF]">PASSWORD</span></h2>
        <p class="text-sm text-gray-500 mt-1">ตั้งค่ารหัสผ่านใหม่เพื่อความปลอดภัยของบัญชีคุณ</p>
    </div>

    <div class="bg-white border border-gray-200 shadow-sm rounded-2xl overflow-hidden">
        <form method="post" class="p-8 space-y-6">
            {% csrf_token %}

            <div class="flex flex-col">
                <label for="{{ form.old_password.id_for_label }}" class="text-xs font-semibold text-gray-400 uppercase mb-2">
                    รหัสผ่านปัจจุบัน
                </label>
                <div class="relative">
                    {{ form.old_password|add_class:"w-full p-3 border border-gray-200 rounded-xl outline-none focus:border-[#3F72AF] focus:ring-1 focus:ring-[#3F72AF] transition text-sm" }}
                </div>
                {% for error in form.old_password.errors %}
                    <p class="text-xs text-red-500 mt-1 font-medium">× {{ error }}</p>
                {% endfor %}
            </div>

            <hr class="border-dashed">

            <div class="flex flex-col">
                <label for="{{ form.new_password1.id_for_label }}" class="text-xs font-semibold text-gray-400 uppercase mb-2">
                    รหัสผ่านใหม่
                </label>
                <div class="relative">
                    {{ form.new_password1|add_class:"w-full p-3 border border-gray-200 rounded-xl outline-none focus:border-[#3F72AF] focus:ring-1 focus:ring-[#3F72AF] transition text-sm" }}
                </div>
                {% if form.new_password1.help_text %}
                    <div class="bg-blue-50 p-3 rounded-lg mt-2 text-[11px] text-[#3F72AF] leading-relaxed">
                        {{ form.new_password1.help_text|safe }}
                    </div>
                {% endif %}
                {% for error in form.new_password1.errors %}
                    <p class="text-xs text-red-500 mt-1 font-medium">× {{ error }}</p>
                {% endfor %}
            </div>

            <div class="flex flex-col">
                <label for="{{ form.new_password2.id_for_label }}" class="text-xs font-semibold text-gray-400 uppercase mb-2">
                    ยืนยันรหัสผ่านใหม่
                </label>
                <div class="relative">
                    {{ form.new_password2|add_class:"w-full p-3 border border-gray-200 rounded-xl outline-none focus:border-[#3F72AF] focus:ring-1 focus:ring-[#3F72AF] transition text-sm" }}
                </div>
                {% for error in form.new_password2.errors %}
                    <p class="text-xs text-red-500 mt-1 font-medium">× {{ error }}</p>
                {% endfor %}
            </div>

            <div class="mt-10 flex flex-col md:flex-row items-center justify-between gap-4 pt-4">
                <a href="{% url 'profile' %}" class="text-sm font-bold text-gray-400 hover:text-[#112D4E] transition">
                    ← ยกเลิกและย้อนกลับ
                </a>
                <button type="submit" class="w-full md:w-auto bg-[#112D4E] hover:bg-[#3F72AF] text-white font-bold py-3 px-10 rounded-xl transition duration-200 shadow-lg shadow-blue-900/10">
                    อัปเดตรหัสผ่าน
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}